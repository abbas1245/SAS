<div class="min-h-screen bg-gray-50 py-8">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header Section -->
    <div class="mb-8">
      <div class="sm:flex sm:items-center sm:justify-between">
        <div>
          <h1 class="text-3xl font-bold text-gray-900">Class Management</h1>
          <p class="mt-2 text-sm text-gray-700">
            Manage and monitor all classes in the system
          </p>
        </div>
        <div class="mt-4 sm:mt-0">
          <%= link_to new_admin_class_standard_path, class: "inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" do %>
            <svg class="-ml-1 mr-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
            </svg>
            Add New Class
          <% end %>
        </div>
      </div>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3 mb-8">
      <!-- Total Classes Card -->
      <div class="bg-white overflow-hidden shadow rounded-lg">
        <div class="p-5">
          <div class="flex items-center">
            <div class="flex-shrink-0 bg-indigo-500 rounded-md p-3">
              <svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
              </svg>
            </div>
            <div class="ml-5 w-0 flex-1">
              <dl>
                <dt class="text-sm font-medium text-gray-500 truncate">Total Classes</dt>
                <dd class="flex items-baseline">
                  <div class="text-2xl font-semibold text-gray-900"><%= @class_standards.count %></div>
                </dd>
              </dl>
            </div>
          </div>
        </div>
      </div>

      <!-- Active Classes Card -->
      <div class="bg-white overflow-hidden shadow rounded-lg">
        <div class="p-5">
          <div class="flex items-center">
            <div class="flex-shrink-0 bg-green-500 rounded-md p-3">
              <svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <div class="ml-5 w-0 flex-1">
              <dl>
                <dt class="text-sm font-medium text-gray-500 truncate">Active Classes</dt>
                <dd class="flex items-baseline">
                  <div class="text-2xl font-semibold text-gray-900"><%= @class_standards.where(active: true).count %></div>
                </dd>
              </dl>
            </div>
          </div>
        </div>
      </div>

      <!-- Inactive Classes Card -->
      <div class="bg-white overflow-hidden shadow rounded-lg">
        <div class="p-5">
          <div class="flex items-center">
            <div class="flex-shrink-0 bg-red-500 rounded-md p-3">
              <svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <div class="ml-5 w-0 flex-1">
              <dl>
                <dt class="text-sm font-medium text-gray-500 truncate">Inactive Classes</dt>
                <dd class="flex items-baseline">
                  <div class="text-2xl font-semibold text-gray-900"><%= @class_standards.where(active: false).count %></div>
                </dd>
              </dl>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Filters and Search -->
    <div class="bg-white shadow rounded-lg mb-8">
      <div class="px-4 py-5 sm:p-6">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0">
          <!-- Filter Buttons -->
          <div class="flex space-x-4">
            <button class="px-4 py-2 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" data-filter="all">
              All Classes
            </button>
            <button class="px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-800 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500" data-filter="active">
              Active Only
            </button>
            <button class="px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-800 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500" data-filter="inactive">
              Inactive Only
            </button>
          </div>

          <!-- Search Box -->
          <div class="relative">
            <input type="text" id="classSearch" placeholder="Search classes..." 
                   class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Classes Grid -->
    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
      <% @class_standards.each do |class_standard| %>
        <div class="class-card bg-white overflow-hidden shadow rounded-lg hover:shadow-lg transition-shadow duration-300" data-status="<%= class_standard.active ? 'active' : 'inactive' %>">
          <div class="p-6">
            <div class="flex items-center justify-between mb-4">
              <div class="flex items-center">
                <div class="flex-shrink-0 h-12 w-12 flex items-center justify-center bg-indigo-100 text-indigo-700 rounded-full">
                  <%= class_standard.year %>
                </div>
                <div class="ml-4">
                  <h3 class="text-lg font-medium text-gray-900"><%= class_standard.name %></h3>
                  <p class="text-sm text-gray-500">Code: <%= class_standard.code %></p>
                </div>
              </div>
              <div>
                <% if class_standard.active %>
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                    <svg class="-ml-0.5 mr-1.5 h-2 w-2 text-green-400" fill="currentColor" viewBox="0 0 8 8">
                      <circle cx="4" cy="4" r="3" />
                    </svg>
                    Active
                  </span>
                <% else %>
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                    <svg class="-ml-0.5 mr-1.5 h-2 w-2 text-red-400" fill="currentColor" viewBox="0 0 8 8">
                      <circle cx="4" cy="4" r="3" />
                    </svg>
                    Inactive
                  </span>
                <% end %>
              </div>
            </div>

            <div class="border-t border-gray-200 pt-4">
              <dl class="grid grid-cols-2 gap-4">
                <div>
                  <dt class="text-sm font-medium text-gray-500">Section</dt>
                  <dd class="mt-1 text-sm text-gray-900"><%= class_standard.section || 'N/A' %></dd>
                </div>
                <div>
                  <dt class="text-sm font-medium text-gray-500">Teachers</dt>
                  <dd class="mt-1 text-sm text-gray-900"><%= class_standard.teachers.count %></dd>
                </div>
                <div>
                  <dt class="text-sm font-medium text-gray-500">Students</dt>
                  <dd class="mt-1 text-sm text-gray-900"><%= class_standard.students.count %></dd>
                </div>
                <div>
                  <dt class="text-sm font-medium text-gray-500">Primary Teacher</dt>
                  <dd class="mt-1 text-sm text-gray-900"><%= class_standard.primary_teacher&.full_name || 'Not Assigned' %></dd>
                </div>
              </dl>
            </div>

            <div class="mt-6 flex space-x-3">
              <%= link_to edit_admin_class_standard_path(class_standard), class: "flex-1 inline-flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" do %>
                <svg class="-ml-1 mr-2 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                </svg>
                Edit
              <% end %>
              
              <%= link_to admin_class_standard_path(class_standard), class: "flex-1 inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" do %>
                <svg class="-ml-1 mr-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                </svg>
                View Details
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <% if @class_standards.empty? %>
      <div class="text-center py-12">
        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
        </svg>
        <h3 class="mt-2 text-sm font-medium text-gray-900">No classes</h3>
        <p class="mt-1 text-sm text-gray-500">Get started by creating a new class.</p>
        <div class="mt-6">
          <%= link_to new_admin_class_standard_path, class: "inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" do %>
            <svg class="-ml-1 mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
            </svg>
            Add Class
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Search functionality
    const searchInput = document.getElementById('classSearch');
    searchInput.addEventListener('keyup', function() {
      const searchValue = this.value.toLowerCase();
      const cards = document.querySelectorAll('.class-card');
      
      cards.forEach(card => {
        const text = card.textContent.toLowerCase();
        if (text.includes(searchValue)) {
          card.style.display = '';
        } else {
          card.style.display = 'none';
        }
      });
    });

    // Filter functionality
    const filterButtons = document.querySelectorAll('[data-filter]');
    filterButtons.forEach(button => {
      button.addEventListener('click', function() {
        // Update active filter appearance
        filterButtons.forEach(btn => {
          btn.classList.remove('bg-indigo-100', 'text-indigo-800');
          btn.classList.add('bg-gray-100', 'text-gray-800');
        });
        this.classList.remove('bg-gray-100', 'text-gray-800');
        this.classList.add('bg-indigo-100', 'text-indigo-800');
        
        const filterValue = this.getAttribute('data-filter');
        const cards = document.querySelectorAll('.class-card');
        
        cards.forEach(card => {
          if (filterValue === 'all') {
            card.style.display = '';
          } else {
            const status = card.getAttribute('data-status');
            card.style.display = (status === filterValue) ? '' : 'none';
          }
        });
      });
    });
  });
</script>

<style>
  .active-row {
    background-color: rgba(99, 102, 241, 0.05);
  }
  .inactive-row {
    background-color: rgba(239, 68, 68, 0.05);
  }
  .bg-gradient-to-r {
    background-image: linear-gradient(to right, var(--tw-gradient-stops));
  }
  .from-indigo-400 {
    --tw-gradient-from: #818cf8;
    --tw-gradient-to: rgb(129 140 248 / 0);
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
  }
  .to-purple-500 {
    --tw-gradient-to: #a855f7;
  }
  .from-green-500 {
    --tw-gradient-from: #22c55e;
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
  }
  .to-green-600 {
    --tw-gradient-to: #16a34a;
  }
  .from-red-500 {
    --tw-gradient-from: #ef4444;
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
  }
  .to-red-600 {
    --tw-gradient-to: #dc2626;
  }
  .bg-gray-700 {
    background-color: #374151;
  }
  .bg-gray-800 {
    background-color: #1f2937;
  }
  .bg-gray-900 {
    background-color: #111827;
  }
  .text-indigo-300 {
    color: #a5b4fc;
  }
  .text-indigo-400 {
    color: #818cf8;
  }
  .btn-gray-700 {
    background-color: #374151;
    border-color: #4b5563;
  }
  .btn-outline-indigo {
    color: #818cf8;
    border-color: #818cf8;
  }
  .bg-indigo-600 {
    background-color: #4f46e5;
  }
  .border-indigo-500 {
    border-color: #6366f1;
  }
  .hover\:bg-indigo-700:hover {
    background-color: #4338ca;
  }
  .hover\:bg-indigo-500\/30:hover {
    background-color: rgba(99, 102, 241, 0.3);
  }
  .hover\:bg-purple-500\/30:hover {
    background-color: rgba(168, 85, 247, 0.3);
  }
  .hover\:bg-red-500\/30:hover {
    background-color: rgba(239, 68, 68, 0.3);
  }
  .bg-clip-text {
    -webkit-background-clip: text;
    background-clip: text;
  }
  .text-transparent {
    color: transparent;
  }
  .text-white table {
    color: white;
  }
  .text-white table a {
    color: #a5b4fc;
  }
  #classTable th {
    font-weight: 600;
    color: #d1d5db;
  }
</style> 